"use strict";angular.module("adminApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.tinymce"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(a){a=a||{};var b=0;return{require:"ngModel",link:function(c,d,e,f){var g,h,i;e.id||e.$set("id","uiTinymce"+b++),h={setup:function(a){a.on("init",function(a){f.$render()}),a.on("ExecCommand",function(b){a.save(),f.$setViewValue(d.val()),c.$$phase||c.$apply()}),a.on("KeyUp",function(b){console.log(a.isDirty()),a.save(),f.$setViewValue(d.val()),c.$$phase||c.$apply()})},mode:"exact",elements:e.id},g=e.uiTinymce?c.$eval(e.uiTinymce):{},angular.extend(h,a,g),setTimeout(function(){tinymce.init(h)}),f.$render=function(){i||(i=tinymce.get(e.id)),i&&i.setContent(f.$viewValue||"")}}}}]),angular.module("adminApp").service("pageService",["$http",function(a){this.getPages=function(b){a({url:"/api/page",method:"GET"}).success(function(a,c,d,e){b(a)})},this.getContent=function(b,c){a({url:"/api/content/"+b.Url,method:"GET"}).success(function(a,b,d,e){c(a)})},this.saveContent=function(b,c,d){a({url:"/api/content/"+b.Url,method:"POST",data:c}).success(function(a,b,c,e){d(a)})}}]),angular.module("adminApp").service("contentService",["$http",function(a){return{getContent:function(){a.get("/api/page").success(function(a){pages=a})}}}]),angular.module("adminApp").service("siteService",["$http",function(a){this.getSite=function(b){a({url:"/api/site"}).success(function(a,c,d,e){b(a)})}}]),angular.module("adminApp").factory("pluginFactory",["$q","$timeout",function(a,b){return function(){var c=a.defer();return b(function(){c.resolve("one")},1),c.promise}}]),angular.module("adminApp").controller("MainCtrl",["$scope","pageService","siteService",function(a,b,c){a.site={},a.currentPage={},a.contents=[],a.previewMode="desktop",a.currentUrl="",b.getPages(function(b){a.pages=b}),c.getSite(function(b){a.site=b}),a.editPage=function(c){a.currentPage=c,a.currentUrl="http://"+a.site.Url+"/"+c.Url,b.getContent(c,function(b){a.contents=b})},a.saveContent=function(){b.saveContent(a.currentPage,a.contents,function(b){var c=new Date,d=c.getTime();a.currentUrl="http://"+a.site.Url+"/"+a.currentPage.Url+"?"+d})},a.setPreviewMode=function(b){a.previewMode=b}}]),angular.module("adminApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("adminApp").directive("plugin",["$compile",function(a){return{restrict:"E",replace:!0,scope:{plugin:"@",content:"="},link:function(b,c,d){var e="<"+b.plugin+' content="content" />',f=a(e)(b);c.append(f)}}}]),angular.module("adminApp").directive("setDimentionsOnload",[function(){return{restrict:"A",link:function(a,b,c){b.on("load",function(){var a=b[0].contentWindow.document.body.scrollHeight+"px";b.css("height",a)})}}}]),angular.module("adminApp").directive("string",function(){return{templateUrl:"views/directives/string.html",replace:!0,restrict:"E",scope:{content:"="}}}),angular.module("adminApp").directive("boolean",function(){return{templateUrl:"views/directives/boolean.html",replace:!0,restrict:"E",scope:{content:"="}}}),angular.module("adminApp").directive("integer",function(){return{templateUrl:"views/directives/integer.html",replace:!0,restrict:"E",scope:{content:"="},link:function(a){a.decrement=function(){a.content.Data=Number(a.content.Data)+1},a.increment=function(){a.content.Data=Number(a.content.Data)-1}}}}),angular.module("adminApp").directive("ritchtext",function(){return{templateUrl:"views/directives/ritchtext.html",replace:!0,restrict:"E",scope:{content:"="}}}),angular.module("adminApp").directive("tags",function(){return{templateUrl:"views/directives/tags.html",replace:!0,restrict:"E",scope:{content:"="}}}),angular.module("adminApp").directive("image1",function(){return{templateUrl:"views/directives/image.html",replace:!0,restrict:"E",scope:{content:"="},link:function(a){}}});